# EntityCore Tools Migration Status

This document tracks which EntityCore tools have been updated to use the field exclusion utilities.

## Completed ✅

### Name Exclusions (EntitycoreExcludeNameParams)
All tools using name exclusions have been updated:
- ✅ `brain-region-getall.ts` - Uses `createEntitycoreExcludeNameOmit()`
- ✅ `species-getall.ts` - Uses `createEntitycoreExcludeNameOmit()`
- ✅ `strain-getall.ts` - Uses `createEntitycoreExcludeNameOmit()`

### Brain Region Exclusions (EntitycoreExcludeBRParams)
All tools using brain region exclusions have been updated:
- ✅ `cell-morphology-getall.ts` - Uses `createEntitycoreExcludeBROmit()`
- ✅ `circuit-getall.ts` - Uses `createEntitycoreExcludeBROmit()`
- ✅ `electrical-cell-recording-getall.ts` - Uses `createEntitycoreExcludeBROmit()`
- ✅ `emodel-getall.ts` - Uses `createEntitycoreExcludeBROmit()`
- ✅ `experimental-bouton-density-getall.ts` - Uses `createEntitycoreExcludeBROmit()`
- ✅ `experimental-neuron-density-getall.ts` - Uses `createEntitycoreExcludeBROmit()`
- ✅ `experimental-synapses-per-connection-getall.ts` - Uses `createEntitycoreExcludeBROmit()`
- ✅ `ion-channel-model-getall.ts` - Uses `createEntitycoreExcludeBROmit()`
- ✅ `ion-channel-recording-getall.ts` - Uses `createEntitycoreExcludeBROmit()`
- ✅ `measurement-annotation-getall.ts` - Uses `createEntitycoreExcludeBROmit()`
- ✅ `memodel-getall.ts` - Uses `createEntitycoreExcludeBROmit()`
- ✅ `simulation-getall.ts` - Uses `createEntitycoreExcludeBROmit()`
- ✅ `simulation-campaign-getall.ts` - Uses `createEntitycoreExcludeBROmit()`
- ✅ `simulation-generation-getall.ts` - Uses `createEntitycoreExcludeBROmit()`
- ✅ `simulation-result-getall.ts` - Uses `createEntitycoreExcludeBROmit()`
- ✅ `single-neuron-simulation-getall.ts` - Uses `createEntitycoreExcludeBROmit()`
- ✅ `single-neuron-synaptome-getall.ts` - Uses `createEntitycoreExcludeBROmit()`
- ✅ `single-neuron-synaptome-simulation-getall.ts` - Uses `createEntitycoreExcludeBROmit()`

## Summary

**Total Tools Updated:** 21
- **Name Exclusions:** 3 tools
- **Brain Region Exclusions:** 18 tools

All EntityCore tools that use field exclusions in Python now use the corresponding TypeScript utilities, ensuring consistent behavior between the Python and TypeScript implementations.

## Update Pattern

For each tool that needs brain region exclusions:

```typescript
// 1. Add import
import { createEntitycoreExcludeBROmit } from '../entitycore-schema-utils';

// 2. Update schema definition
const MyToolInputSchema = zReadManyMyEntityGetData.shape.query
  .unwrap()
  .extend({
    // Custom fields...
    within_brain_region_brain_region_id: z.string().uuid().optional(),
    within_brain_region_direction: z.enum([...]).default(...),
  })
  .omit(createEntitycoreExcludeBROmit()); // Use utility instead of manual omit

// 3. Update comment to reference the utility
// Extends the autogenerated query schema with custom overrides:
// - Excludes ALL brain_region parameters (EntitycoreExcludeBRParams pattern via createEntitycoreExcludeBROmit())
```

## Verification

After updating each tool:

1. Check that the import is added
2. Verify `.omit(createEntitycoreExcludeBROmit())` is used
3. Ensure comments reference the utility function
4. Test that the tool still works correctly
5. Verify the generated JSON schema doesn't include excluded fields

## Notes

- The utility functions are defined in `entitycore-schema-utils.ts`
- All exclusions match the Python `base_tool.py` implementation
- See `entitycore-field-exclusions.md` for detailed documentation
